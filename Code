<html>
<head>
<meta charset="utf-8"/>
<link rel="stylesheet" style="text/css" href="testCSS.css" />
<title> Eas'Improve </title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
<!--
//Variables à créer : carteEnCours = {"question","reponse"}, tableauCartes
//Boutons à afficher : question suivante, afficher réponse (+onclick),

var tableauCartes = [
"question1", 
"reponse1",
"question2", 
"reponse2",
  "question3",
  "reponse3",
  "question4",
  "reponse4",
  "question5",
  "reponse5",
  "question6",
  "reponse6",
  "question7",
  "reponse7",
  "question8",
  "reponse8",
  "question9",
  "reponse9",
  "question10",
  "reponse10"
]; //code de récupération des données pour remplir le tableau
  
  var scoreEtape2 = 0; //à merger avec score !!
  var scoreEtape3 = 0;
  var jeuEnCours = 1;
  var espaceScore = document.getElementById('espaceScore');
  
  function remplirTableau()
  {
    
  }
  
var carteARemplir = document.getElementById('boutonCarte'); // voir où on le déclare
  
var numeroQuestion = 1; 

  function afficherCarte()
{
    //mettre la question dans la box
    //voir quand on s'arrête (au bout de combien de questions/quand on est au bout du tableau)
    //carteARemplir.value = tableauCartes['question1'];
  var carteARemplir = document.getElementById('boutonCarte');
  carteARemplir.value="Start"; 
  document.getElementById('boutonEtape2').hidden = true;
  document.getElementById('boutonEtape3').hidden = true;
  document.getElementById('espaceReponse').hidden = true;
  document.getElementById('tableau').hidden=true;
  document.getElementById('groupeEtape3').hidden=true;
  document.getElementById('jeNeSaisPas').style.visibility='hidden';
   document.getElementById('nomEtape').innerHTML='First step : flip the cards and learn!';
}
  
function retournerCarte() 
{
  document.getElementById('boutonQuestionSuivante').hidden=false; 
  document.getElementById('numQuestion').innerHTML='Question '+numeroQuestion;
  var carteARemplir = document.getElementById('boutonCarte');
  
  if(carteARemplir.value==tableauCartes[2*numeroQuestion-2])//si la carte affiche la question
  {
    //au clic, on affiche la réponse
    carteARemplir.value=tableauCartes[2*numeroQuestion -1]; 
    document.getElementById('boutonCarte').style.backgroundColor="#2A83FF";
  }
   
  else //sinon la carte affiche la réponse et au clic on affiche la question
  {
    carteARemplir.value=tableauCartes[2*numeroQuestion-2]; 
  	document.getElementById('boutonCarte').style.backgroundColor="#2A8399";
  }
    
  
  if(jeuEnCours==3)
    {
      document.getElementById('boutonCarte').style.pointerEvents='none';
      document.getElementById('jeNeSaisPas').style.visibility='visible';
      document.getElementById('groupeEtape3').hidden=false;
      //document.getElementById('boutonQuestionSuivante').disabled = false;
    	document.getElementById('boutonQuestionSuivante').hidden = false;
      document.getElementById('caseARemplir').value=""; 
    }
  
  if(jeuEnCours==3 && numQuestion==1)
    {
      document.getElementById('caseARemplir').value=""; 
      document.getElementById('jeNeSaisPas').disabled=false;
      document.getElementById('boutonValider').disabled=false;
      document.getElementById('boutonQuestionSuivante').style.backgroundColor="#FFF7E6";
      document.getElementById('boutonQuestionSuivante').disabled=true;
      document.getElementById('caseARemplir').focus();
    }
}
  
function tirerNouvelleCarte()
{
  numeroQuestion++;
  var boutonCarte = document.getElementById('boutonCarte');
  boutonCarte.value=tableauCartes[2*numeroQuestion-2];
  boutonCarte.focus(); // rendre le focus à la carte à retourner pour pouvoir retourner au clic sur entrée
  boutonCarte.style.backgroundColor="#2A8399";
  document.getElementById('numQuestion').innerHTML='Question '+numeroQuestion;
    //tirer une nouvelle carte dans le tableau
    //les tirer dans l'ordre pour ne pas les tirer plusieurs fois (quitte à choisir dix questions aléatoirement dans le load)
  if(numeroQuestion==10 && jeuEnCours==1) //fin jeu 1, on met le bouton pour le passage à l'étape 2
    {
      document.getElementById('boutonEtape2').hidden = false;
  		document.getElementById('boutonQuestionSuivante').disabled = true;
    }
  if(jeuEnCours==3)
    {
      document.getElementById('caseARemplir').value=""; 
      document.getElementById('jeNeSaisPas').disabled=false;
      document.getElementById('boutonValider').disabled=false;
      document.getElementById('boutonQuestionSuivante').style.backgroundColor="#FFF7E6";
      document.getElementById('boutonQuestionSuivante').disabled=true;
      document.getElementById('caseARemplir').focus();
    }
}
  //ETAPE DEUX : RELIER LE MOT ET SA TRADUCTION (JEU DES PAIRES)
  function chargerEtape2()
  {    
    document.getElementById('boutonCarte').style.visibility= 'hidden';
    document.getElementById('boutonEtape2').hidden = true;
  document.getElementById('numQuestion').hidden=true;  document.getElementById('boutonQuestionSuivante').hidden = true;
    document.getElementById('tableau').hidden=false;
    document.getElementById('espaceConsigne').innerHTML="Click on a word and its translation to win!";
    document.getElementById('espaceReponse').hidden = false;
    document.getElementById('nomEtape').innerHTML='Second step : find the pairs';
    document.getElementById('boutonQuestionSuivante').disabled=true;

    jeuEnCours=2;
    //AFFICHAGE DU TABLEAU TYPE MEMORY
 
    var numeroCase = "case1";
    var tableauMelange = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19];
    var temp;
    
    for(var i=0; i<10; i++)
      {
            rnd = Math.floor(Math.random() * (20));
        		temp = tableauMelange[rnd];
        		rnd2 = Math.floor(Math.random() * (20));
        		tableauMelange[rnd]=tableauMelange[rnd2];
        		tableauMelange[rnd2]=temp;
                    
      }
    
    for(var i=1; i<21; i++)
      {
        numeroCase = numeroCase.slice(0,4);
        numeroCase = numeroCase.concat(i);
        document.getElementById(numeroCase).innerHTML = tableauCartes[tableauMelange[i-1]]; 
      }
   
  }
  
  var nombreCartesColorees = 0;
  var premiereCaseCliquee;
  var deuxiemeCaseCliquee;
  var reponsePrecedenteJuste=false;
  var nombreQuestionsRepondues=0;
  var scoreEtape2=10; 
  function test(caseCliquee) //changer nom fonction
  {
      if(nombreCartesColorees == 0)
      {
        if(premiereCaseCliquee!=null)
          {
           
            if(reponsePrecedenteJuste)
              {
              premiereCaseCliquee.style.backgroundColor="#BFC6B6"; //bleu
              premiereCaseCliquee.innerHTML =" ";
              premiereCaseCliquee.style.pointerEvents='none';
        		 	deuxiemeCaseCliquee.style.backgroundColor="#BFC6B6"; //bleu
              deuxiemeCaseCliquee.innerHTML =" ";
              deuxiemeCaseCliquee.style.pointerEvents='none';
              }
            else
              {
              premiereCaseCliquee.style.backgroundColor="#FFECC6";
        			deuxiemeCaseCliquee.style.backgroundColor="#FFECC6";
              }
          }
        caseCliquee.style.backgroundColor = "#232FFF";
        nombreCartesColorees++;
        premiereCaseCliquee = caseCliquee;
      }
    else if (nombreCartesColorees == 1)
      {
        deuxiemeCaseCliquee=caseCliquee;
        caseCliquee.style.backgroundColor = "#232FFF";
        
        // CODE DE VERIFICATION DE LA CONCORDANCE DES CASES CHOISIES
        for (var i=0;i<20;i++)
          {
            if (deuxiemeCaseCliquee.innerHTML == tableauCartes[i] && i%2==0)//c'est pair donc une question
              {
                if(premiereCaseCliquee.innerHTML == tableauCartes[i+1]) 
                  {
                    //bon appariement
                    document.getElementById('espaceReponse').innerHTML ="Good answer!"
                    reponsePrecedenteJuste=true;
                    nombreQuestionsRepondues++;
                  }
                else 
                	{
                  	//mauvais appariement 
                    document.getElementById('espaceReponse').innerHTML ="That's a wrong answer. You lose a point";
                    reponsePrecedenteJuste=false;
                    scoreEtape2--;
                	}
              }
            else if (deuxiemeCaseCliquee.innerHTML == tableauCartes[i] && i%2==1)//reponse
              {
                if(premiereCaseCliquee.innerHTML == tableauCartes[i-1]) 
                  {
                    //bon appariement
                    document.getElementById('espaceReponse').innerHTML ="Good answer!"
                    reponsePrecedenteJuste=true;
                    nombreQuestionsRepondues++;
                    
                  }
                else 
                	{
                  	//mauvais appariement 
                    document.getElementById('espaceReponse').innerHTML ="That's a wrong answer. You lose a point";
                    reponsePrecedenteJuste=false;
                    scoreEtape2--;
                	}
              }
          }
        document.getElementById('espaceScore').innerHTML="Your score is: "+scoreEtape2+"/10";
        if(nombreQuestionsRepondues==10)
                  {
                    document.getElementById('boutonEtape3').hidden = false;
                  }
        nombreCartesColorees = 0;
      }
  }
  
  //ETAPE TROIS : TAPER LA REPONSE
  //gestion avec un form
   function chargerEtape3()
  {
    numeroQuestion = 1; 
    scoreEtape3=0;
    jeuEnCours=3; 
   
    //on cache les éléments de l'étape précédente
    document.getElementById('tableau').hidden=true;
    
    //et on affiche ceux de cette étape qui apparaissent avant le clic sur Start
    document.getElementById('espaceConsigne').innerHTML = "You will now have to write the translation of the words displayed on the cards.";
    var boutonCarte = document.getElementById('boutonCarte');
    boutonCarte.style.visibility= 'visible';
    boutonCarte.value="Start";
    boutonCarte.style.backgroundColor="#99A999";
    document.getElementById('boutonEtape3').hidden=true;
  	document.getElementById('boutonQuestionSuivante').disabled=true;
    document.getElementById('espaceScore').innerHTML=" ";
    document.getElementById('espaceReponse').innerHTML=" ";
    document.getElementById('nomEtape').innerHTML='Third exercice : translation';
    
    //sauf ceux qui n'apparaissent qu'après le clic sur "Start"
    document.getElementById('jeNeSaisPas').style.visibility='hidden';
  }
  
  function verifierReponse()
  {
    //on ne peut plus répondre, on voit son score et la réponse et on ne peut que cliquer sur Question suivante
    document.getElementById('jeNeSaisPas').disabled=true;
    document.getElementById('boutonValider').disabled=true;
    document.getElementById('boutonQuestionSuivante').disabled=false;
    document.getElementById('boutonQuestionSuivante').focus();
    document.getElementById('boutonQuestionSuivante').style.backgroundColor="#FC724E";
    
    if(document.getElementById('caseARemplir').value=="") //si validation sans réponse ou appui sur "I don't know"
      {
        document.getElementById('espaceReponse').innerHTML="You gave no answer. The good answer was: 				"+tableauCartes[2*numeroQuestion-1]; 
      }
    
  	else if(document.getElementById('caseARemplir').value==tableauCartes[2*numeroQuestion-1])
    	{
      	//augmenter score
      	scoreEtape3++;
      	//dire qu'on a la bonne réponse
      	document.getElementById('espaceReponse').innerHTML = "You said: 				 	"+document.getElementById('caseARemplir').value +". Congratulations! That's the good answer!"
    	}
    
    else
    	{
      	//dire que la réponse est fausse et donner la bonne
      	document.getElementById('espaceReponse').innerHTML = "You said: "+document.getElementById('caseARemplir').value + ". That's a wrong answer! The good answer was: "+tableauCartes[2*numeroQuestion-1];  
    	}
    
    retournerCarte(); //affiche la bonne réponse dans la carte
    document.getElementById('espaceScore').innerHTML="Your score is: "+scoreEtape3+"/10";
    
    if(numeroQuestion==10) //fin du jeu, on cache tous les éléments et on affiche le score
      {
        document.getElementById('nomEtape').innerHTML ="End of the game! You scored "+scoreEtape2+"/10 at the pairing game and "+scoreEtape3+"/10 at the translating game.";
        document.getElementById('boutonCarte').style.visibility= 'hidden';
        document.getElementById('boutonQuestionSuivante').style.visibility= 'hidden';
        document.getElementById('jeNeSaisPas').style.visibility= 'hidden';
				document.getElementById('groupeEtape3').hidden=true;
 				document.getElementById('espaceScore').hidden=true;
        document.getElementById('espaceConsigne').hidden=true;
        document.getElementById('espaceReponse').hidden=true;
      }
  }
  
//-->
</script>
</head>


<body onload="afficherCarte()">
<p id=nomEtape></p>
<p id=espaceConsigne></p>
<p id=numQuestion></p>
<p id="espaceReponse"></p> 
<p id="espaceScore"></p>
  
<p>
<TABLE id=tableau width=60% border=1>
<TR>
<TD id=case1 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case2 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case3 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case4 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case5 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
</TR>
<TR>
<TD id=case6 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case7 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case8 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case9 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case10 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
</TR>
<TR>
<TD id=case11 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case12 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case13 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case14 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case15 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
</TR>
<TR>
<TD id=case16 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case17 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case18 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case19 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
<TD id=case20 width=20% onmouseover="" style="cursor: pointer;" onclick="test(this)"></TD>
</TR>
</TABLE>
</p>
  

  
<input type="button" id="boutonEtape3" title="Start the next step" value="Step 3" onclick="chargerEtape3()"></input>
  
<p>
<input type="submit" id="boutonCarte"  title="Click to flip" onclick="retournerCarte()" onmouseover="" style="cursor: pointer;"></input>
<input type="submit" id="jeNeSaisPas"  title="Pass the question" value="I don't know" onclick="verifierReponse()"></input>
<input type="button" id="boutonQuestionSuivante" title="Go to the next question" value="Next" onclick="tirerNouvelleCarte()" hidden=true></input>
<input type="button" id="boutonEtape2" title="Start the next step" value="Step 2" onclick="chargerEtape2()"></input>
</p>

<p id=groupeEtape3>
Enter your translation: 
<input type="text" id="caseARemplir"></input>
<input type="submit" id=boutonValider value="Submit" onclick="verifierReponse()">
</p>
</body> 
